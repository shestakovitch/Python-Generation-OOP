"""–ö–ª–∞—Å—Å HistoryDict üå∂Ô∏è
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å HistoryDict, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —Å–ª–æ–≤–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª—é—á—É. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
—ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:

data ‚Äî —Å–ª–æ–≤–∞—Ä—å, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞—á–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ HistoryDict. –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –Ω–∞—á–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä
—ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—É—Å—Ç—ã–º
–ö–ª–∞—Å—Å HistoryDict –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—è—Ç—å –º–µ—Ç–æ–¥–æ–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞:

keys() ‚Äî –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç, —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è –∫–ª—é—á–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ HistoryDict
values() ‚Äî –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç, —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∫–ª—é—á–µ–π —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞
HistoryDict
items() ‚Äî –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ HistoryDict –≤
–≤–∏–¥–µ –∫–æ—Ä—Ç–µ–∂–µ–π (<–∫–ª—é—á>, <–∑–Ω–∞—á–µ–Ω–∏–µ>)
history() ‚Äî –º–µ—Ç–æ–¥, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫–ª—é—á –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫, —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è –≤—Å–µ
–∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –∫–ª–∞—Å—Å–∞ HistoryDict –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∫–ª—é—á—É. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–π –∫–ª—é—á –Ω–µ
—Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –∫–ª–∞—Å—Å–∞ HistoryDict (–±—ã–ª —É–¥–∞–ª–µ–Ω –∏–ª–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–ª—Å—è), –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
all_history() ‚Äî –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Å–ª–æ–≤–∞—Ä—å, –∫–ª—é—á–∞–º–∏ –≤ –∫–æ—Ç–æ—Ä–æ–º —è–≤–ª—è—é—Ç—Å—è –∫–ª—é—á–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ HistoryDict, –∞
–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ‚Äî —Å–ø–∏—Å–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å –ø–æ —ç—Ç–∏–º –∫–ª—é—á–∞–º
–ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ HistoryDict –≤ —Ñ—É–Ω–∫—Ü–∏—é len() –¥–æ–ª–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –Ω–µ–º.

–¢–∞–∫–∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ HistoryDict –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–º –æ–±—ä–µ–∫—Ç–æ–º, —Ç–æ –µ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è—Ç—å –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —Å–≤–æ–∏ –∫–ª—é—á–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä,
—Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞ for.

–ù–∞–∫–æ–Ω–µ—Ü, —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ HistoryDict –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –ø–æ–ª—É—á–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ –∏—Ö –∫–ª—é—á–∞–º,
–¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ä—ã (–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ) –∏ —É–¥–∞–ª—è—Ç—å —É–∂–µ –∏–º–µ—é—â–∏–µ—Å—è.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 1. –≠–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ HistoryDict –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Å–ª–æ–≤–∞—Ä—è, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–Ω –±—ã–ª —Å–æ–∑–¥–∞–Ω. –î—Ä—É–≥–∏–º–∏
—Å–ª–æ–≤–∞–º–∏, –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –∏–∑–º–µ–Ω–∏—Ç—Å—è, —Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ HistoryDict –∏–∑–º–µ–Ω–∏—Ç—å—Å—è  –Ω–µ –¥–æ–ª–∂–µ–Ω.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ HistoryDict –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π, —Ç–æ –µ—Å—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –Ω–∞–ª–∏—á–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
–Ω–µ—Ç.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤ –º–µ—Ç–æ–¥–∞—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π
–∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏."""


class HistoryDict:
    def __init__(self, data={}):
        self._data = {key: [value] for key, value in data.items()}

    def __len__(self):
        return len(self._data)

    def __iter__(self):
        yield from self._data.keys()

    def __getitem__(self, key):
        return self._data[key][-1]

    def __setitem__(self, key, value):
        self._data.setdefault(key, []).append(value)

    def __delitem__(self, key):
        del self._data[key]

    def keys(self):
        return self._data.keys()

    def values(self):
        return [v[-1] for v in self._data.values()]

    def items(self):
        return [(k, v[-1]) for k, v in self._data.items()]

    def history(self, key):
        return self._data.get(key, [])

    def all_history(self):
        return {key: value for key, value in self._data.items()}


# Sample Input 1:
#
# historydict = HistoryDict({'ducks': 99, 'cats': 1})
#
# print(historydict['ducks'])
# print(historydict['cats'])
# print(len(historydict))
# Sample Output 1:
#
# 99
# 1
# 2
# Sample Input 2:
#
# historydict = HistoryDict({'ducks': 99, 'cats': 1})
#
# print(*historydict)
# print(*historydict.keys())
# print(*historydict.values())
# print(*historydict.items())
# Sample Output 2:
#
# ducks cats
# ducks cats
# 99 1
# ('ducks', 99) ('cats', 1)
# Sample Input 3:
#
# historydict = HistoryDict({'ducks': 99, 'cats': 1})
#
# historydict['ducks'] = 100
# print(historydict.history('ducks'))
# print(historydict.history('cats'))
# print(historydict.history('dogs'))
# Sample Output 3:
#
# [99, 100]
# [1]
# []
# Sample Input 4:
#
# historydict = HistoryDict({'ducks': 99, 'cats': 1})
#
# print(historydict.all_history())
# historydict['ducks'] = 100
# historydict['ducks'] = 101
# historydict['cats'] = 2
# print(historydict.all_history())
# Sample Output 4:
#
# {'ducks': [99], 'cats': [1]}
# {'ducks': [99, 100, 101], 'cats': [1, 2]}
# Sample Input 5:
#
# historydict = HistoryDict({'ducks': 99, 'cats': 1})
#
# historydict['dogs'] = 1
# print(len(historydict))
# del historydict['ducks']
# del historydict['cats']
# print(len(historydict))
# Sample Output 5:
#
# 3
# 1